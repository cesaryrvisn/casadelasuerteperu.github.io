<!-- 🔥 SORTEO DIARIO ACUMULABLE 🔥 -->
<section id="sorteo-acumulable" style="margin-top: 30px; padding: 20px; background: linear-gradient(180deg,#001f4d,#002b66); border-radius: 20px; box-shadow: 0 0 10px #0003; text-align: center; color: #fff;">

  <h2 style="color: #ffde59; font-size: 1.5em; margin-bottom: 10px;">
    🎯 Sorteo Diario Acumulable desde S/1
  </h2>

  <p style="font-size: 1.1em;">
    ¡El pozo crece en tiempo real y puede tocarte a ti!<br>
    Cada participante aporta <strong>S/1</strong> y el premio se actualiza automáticamente.
  </p>

  <div style="margin: 20px auto; padding: 10px; background: #003366; border-radius: 12px; width: 90%; max-width: 400px;">
    <h3 style="color: #00ff99;">💰 Pozo actual: S/<span id="pozo">0</span></h3>
    <p style="font-size: 0.9em;">(Actualiza en tiempo real con cada ticket vendido)</p>
  </div>

  <div>
    <label for="cantidad" style="display:block; margin-bottom:5px;">Cantidad de tickets:</label>
    <input type="number" id="cantidad" min="1" value="1" style="padding:6px; border-radius:6px; border:none; width:80px; text-align:center;">
  </div>

  <button id="comprar-acumulable" style="margin-top:15px; padding:12px 20px; background:#ffde59; color:#000; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">
    🎟️ Comprar ticket(s)
  </button>

  <p id="mensaje-compra" style="margin-top:10px; font-size:0.95em; color:#9eff9e;"></p>

  <p style="margin-top: 20px; font-size: 0.9em; color:#ddd;">
    El pozo se reinicia automáticamente cada día a las 00:00 🕛<br>
    Comisión del 10% aplicada al total acumulado.
  </p>

</section>

<script>
  // ---- 🧠 Configuración ----
  const comision = 0.10; // 10%
  let pozo = parseFloat(localStorage.getItem('pozo')) || 0;
  const pozoEl = document.getElementById('pozo');
  const mensajeEl = document.getElementById('mensaje-compra');

  // ---- ⏰ Reinicio diario ----
  function reiniciarSiEsNuevoDia() {
    const hoy = new Date().toDateString();
    const ultimoDia = localStorage.getItem('ultimoDia');
    if (ultimoDia !== hoy) {
      pozo = 0;
      localStorage.setItem('ultimoDia', hoy);
      localStorage.setItem('pozo', pozo);
    }
  }
  reiniciarSiEsNuevoDia();

  // ---- 🧮 Actualizar Pozo ----
  function actualizarPozo() {
    pozoEl.textContent = pozo.toFixed(2);
  }
  actualizarPozo();

  // ---- 💸 Comprar Ticket ----
  document.getElementById('comprar-acumulable').addEventListener('click', () => {
    const cantidad = parseInt(document.getElementById('cantidad').value);
    if (cantidad > 0) {
      const monto = cantidad * 1; // S/1 por ticket
      pozo += monto * (1 - comision);
      localStorage.setItem('pozo', pozo);
      actualizarPozo();
      mensajeEl.textContent = `✅ Has comprado ${cantidad} ticket(s). ¡Buena suerte!`;
      setTimeout(() => mensajeEl.textContent = "", 4000);
    }
  });

  // ---- 🔁 Actualización en tiempo real ----
  setInterval(() => {
    actualizarPozo();
  }, 1000);
</script>
