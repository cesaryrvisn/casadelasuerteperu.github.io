<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, doc, getDoc, updateDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // Tu configuraciÃ³n de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyA9nXS3Ctz-DTubHMD3xuHksHk5F_a4rgg",
    authDomain: "sorteo-diario-c6897.firebaseapp.com",
    projectId: "sorteo-diario-c6897",
    storageBucket: "sorteo-diario-c6897.firebasestorage.app",
    messagingSenderId: "1095733857217",
    appId: "1:1095733857217:web:e8969eecb13cc562c0bd40"
  };

  // Inicializa Firebase y Firestore
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const pozoElement = document.getElementById("pozo");
  const botonSimular = document.getElementById("simular");

  async function cargarPozo() {
    const docRef = doc(db, "sorteos", "diario");
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
      pozoElement.textContent = "ðŸ’° Pozo acumulado de hoy: S/ " + docSnap.data().acumulado;
    } else {
      await setDoc(docRef, { acumulado: 0 });
      pozoElement.textContent = "ðŸ’° Pozo acumulado de hoy: S/ 0";
    }
  }

  botonSimular.addEventListener("click", async () => {
    const docRef = doc(db, "sorteos", "diario");
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
      const nuevoValor = docSnap.data().acumulado + 1;
      await updateDoc(docRef, { acumulado: nuevoValor });
      pozoElement.textContent = "ðŸ’° Pozo acumulado de hoy: S/ " + nuevoValor;
    }
  });

  cargarPozo();
</script>
